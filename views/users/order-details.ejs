<%- include('../layouts/userHeader.ejs') %>
  <!-- Header -->
  <header class="header-v4">
    <!-- Header desktop -->
    <div class="container-menu-desktop">
      <!-- Topbar -->
      <div class="top-bar">
        <div class="content-topbar flex-sb-m h-full container">
          <div class="left-top-bar">
            Free shipping for standard order over â‚¹ 1000
          </div>
          <div class="right-top-bar flex-w h-full">
            <a href="/profile" class="flex-c-m trans-04 p-lr-25">
              My Account
            </a>
          </div>
        </div>
      </div>

      <div class="wrap-menu-desktop">
        <nav class="limiter-menu-desktop container">
          <!-- Logo desktop -->
          <a href="/" class="logo">
            <img src="assets/images/icons/logo-01.png" alt="IMG-LOGO">
          </a>

          <!-- Menu desktop -->
          <div class="menu-desktop">
            <ul class="main-menu">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/shop">Shop</a>
              </li>
              <li>
                <a href="/cart">Cart</a>
              </li>
              <li>
                <a href="/contact">Contact</a>
              </li>
              <li>
                <a href="/profile">My Account</a>
                <ul class="sub-menu">
                  <li><a href="/profile">Profile</a></li>
                  <li><a href="/orders">Orders</a></li>
                  <li><a href="/logout">Logout</a></li>
                </ul>
              </li>
            </ul>
          </div>

          <!-- Icon header -->
          <div class="wrap-icon-header flex-w flex-r-m">
            <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-modal-search">
              <i class="zmdi zmdi-search"></i>
            </div>

            <% if(!userCart ){ %>
              <a href="/cart" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
                data-notify="0">
                <i class="zmdi zmdi-shopping-cart"></i>
              </a>
              <% } else { %>
                <a href="/cart" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
                  data-notify="<%= userCart.products.length %>">
                  <i class="zmdi zmdi-shopping-cart"></i>
                </a>
                <% } %>

                  <% if(!wishlist ){ %>
                    <a href="/wishlist"
                      class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
                      data-notify="0">
                      <i class="zmdi zmdi-favorite-outline"></i>
                    </a>
                    <% } else { %>
                      <a href="/wishlist"
                        class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
                        data-notify="<%= wishlist.products.length %>">
                        <i class="zmdi zmdi-favorite-outline"></i>
                      </a>
                      <% } %>
          </div>
        </nav>
      </div>
    </div>

    <!-- Header Mobile -->
    <div class="wrap-header-mobile">
      <!-- Logo moblie -->
      <div class="logo-mobile">
        <a href="/"><img src="assets/images/icons/logo-01.png" alt="IMG-LOGO"></a>
      </div>

      <!-- Icon header -->
      <div class="wrap-icon-header flex-w flex-r-m m-r-15">
        <div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 js-show-modal-search">
          <i class="zmdi zmdi-search"></i>
        </div>

        <% if(!userCart ){ %>
          <a href="/cart">
            <div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti " data-notify="0">
              <i class="zmdi zmdi-shopping-cart"></i>
            </div>
          </a>
          <% } else { %>
            <a href="/cart">
              <div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti "
                data-notify="<%= userCart.products.length %>">
                <i class="zmdi zmdi-shopping-cart"></i>
              </div>
            </a>
            <% } %>

              <% if(!wishlist ){ %>
                <a href="/wishlist"
                  class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti"
                  data-notify="0">
                  <i class="zmdi zmdi-favorite-outline"></i>
                </a>
                <% } else { %>
                  <a href="/wishlist"
                    class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti"
                    data-notify="<%= wishlist.products.length %>">
                    <i class="zmdi zmdi-favorite-outline"></i>
                  </a>
                  <% } %>
      </div>

      <!-- Button show menu -->
      <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
        <span class="hamburger-box">
          <span class="hamburger-inner"></span>
        </span>
      </div>
    </div>

    <!-- Menu Mobile -->
    <div class="menu-mobile">
      <ul class="topbar-mobile">
        <li>
          <div class="left-top-bar">
            Free shipping for standard order over Rs 1000
          </div>
        </li>
      </ul>
      <ul class="main-menu-m">
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/shop">Shop</a>
        </li>
        <li>
          <a href="/cart">Cart</a>
        </li>
        <li>
          <a href="/contact">Contact</a>
        </li>
        <li>
          <a href="/profile">My Account</a>
          <ul class="sub-menu-m">
            <li><a href="/profile">Profile</a></li>
            <li><a href="/orders">Orders</a></li>
            <li><a href="/logout">Logout</a></li>
          </ul>
          <span class="arrow-main-menu-m">
            <i class="fa fa-angle-right" aria-hidden="true"></i>
          </span>
        </li>
      </ul>
    </div>

    <!-- Modal Search -->
    <div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
      <div class="container-search-header">
        <button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
          <img src="assets/images/icons/icon-close2.png" alt="CLOSE">
        </button>

        <form class="wrap-search-header flex-w p-l-15">
          <button class="flex-c-m trans-04">
            <i class="zmdi zmdi-search"></i>
          </button>
          <input class="plh3" type="text" name="search" placeholder="Search...">
        </form>
      </div>
    </div>
  </header>

  <!-- Breadcrumb Section Begin -->
  <section class="breadcrumb-option">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="breadcrumb__text">
            <h4>Your Orders</h4>
            <div class="breadcrumb__links">
              <a href="/">Home</a>
              <a href="/profile">Profile</a>
              <a href="/orders">Orders</a>
              <span>
                <%= order._id %>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Breadcrumb Section End -->

  <style>
    .card-stepper {
      z-index: 0
    }

    #progressbar-2 {
      color: #455A64;
    }

    #progressbar-2 li {
      list-style-type: none;
      font-size: 13px;
      width: 33.33%;
      float: left;
      position: relative;
    }

    #progressbar-2 #step1:before {
      content: '\f058';
      font-family: "Font Awesome 5 Free";
      color: #fff;
      width: 37px;
      margin-left: 0px;
      padding-left: 0px;
    }

    #progressbar-2 #step2:before {
      content: '\f058';
      font-family: "Font Awesome 5 Free";
      color: #fff;
      width: 37px;
    }

    #progressbar-2 #step3:before {
      content: '\f058';
      font-family: "Font Awesome 5 Free";
      color: #fff;
      width: 37px;
      margin-right: 0;
      text-align: center;
    }

    #progressbar-2 #step4:before {
      content: '\f058';
      font-family: "Font Awesome 5 Free";
      color: #fff;
      width: 37px;
      margin-right: 0;
      text-align: center;
    }

    #progressbar-2 #step5:before {
      content: '\274C';
      font-family: "Font Awesome 5 Free";
      color: #fff;
      width: 37px;
      margin-right: 0;
      text-align: center;
    }

    #progressbar-2 li:before {
      line-height: 37px;
      display: block;
      font-size: 12px;
      background: #c5cae9;
      border-radius: 50%;
    }

    #progressbar-2 li:after {
      content: '';
      width: 100%;
      height: 10px;
      background: #c5cae9;
      position: absolute;
      left: 0%;
      right: 0%;
      top: 15px;
      z-index: -1;
    }

    #progressbar-2 li:nth-child(1):after {
      left: 1%;
      width: 100%;
    }

    #progressbar-2 li:nth-child(2):after {
      left: 1%;
      width: 100%;
    }

    #progressbar-2 li:nth-child(3):after {
      left: 1%;
      width: 100%;
      /* background: #c5cae9 !important; */
    }

    #progressbar-2 li:nth-child(4) {
      left: 0;
      width: 37px;
    }

    #progressbar-2 li:nth-child(4):after {
      left: 0;
      width: 0;
    }

    #progressbar-2 li.active:before {
      background: #000000;

    }

    #progressbar-2 li.lineActive:after {
      background: #000000;
    }
  </style>
  <section style="background-color: #ffffff;">
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
          <div class="card card-stepper text-black" style="border-radius: 16px; background-color: #f3f2ee;">
            <div class="card-body p-5">
              <div class="d-flex justify-content-between align-items-center ">
                <div>
                  <h5 class="mb-0">INVOICE <span class="text-primary font-weight-bold">
                      <%= order._id %>
                    </span></h5>
                </div>
                <div class="text-end">
                  <p class="mb-0">Expected Arrival <span>01/12/19</span></p>
                  <!-- <p class="mb-0">USPS <span class="font-weight-bold">234094567242423422898</span></p> -->
                </div>
              </div>
              <div>
                <div class="card-body p-5">
                  <p class="lead fw-bold" style="color: #000000;">Purchase Reciept</p>
                  <div class="row">
                    <div class="col mb-3">
                      <p class="small text-muted mb-1">Date</p>
                      <p>
                        <%= order.orderDate %>
                      </p>
                    </div>
                  </div>

                  <div class="mx-n5  py-4" style="background-color: #f2f2f2;">
                    <div class="row">
                      <% order.products .forEach(element=> { %>

                        <div class="col-md-8 col-lg-9" style="display: flex; align-items: center;">

                          <img src="/images/<%= element.productID.image[0] %>" alt="" width="100px">

                          <p class="p-l-50">
                            <%= element.name %> x <%= element.quantity %>
                          </p>
                          <p class="float-end">Rs <%= element.price %>
                          </p>
                        </div>

                        <!-- <div class="col-md-8 col-lg-9">
                          <p>
                            <%= element.name %> x <%= element.quantity %>
                          </p>
                        </div> -->

                        <div class="col-md-4 col-lg-3">
                          <p>Rs <%= element.price %>
                          </p>
                        </div>
                        <% }); %>
                    </div>
                    <br><br><br>
                    <div class="row">
                      <div class="col-md-8 col-lg-9">
                        <p class="mb-0">Shipping</p>
                      </div>
                      <div class="col-md-4 col-lg-3">
                        <p class="mb-0">FREE</p>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-4 offset-md-8 col-lg-3 offset-lg-9">
                      <p class="lead fw-bold mb-0" style="color: #000000;">Total Rs <%= order.Total %>
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <% if (order.orderStatus=='Placed' ) {%>
                <ul id="progressbar-2" class="d-flex justify-content-between mx-0 mt-0 mb-5 px-0 pt-0 pb-2">
                  <li class="  active text-center" id="step1"></li>
                  <li class="    text-center" id="step2"></li>
                  <li class="     text-center" id="step3"></li>
                  <li class="  text-center " id="step4"></li>
                </ul>
                <% }else if (order.orderStatus=='Shipped' ) {%>
                  <ul id="progressbar-2" class="d-flex justify-content-between mx-0 mt-0 mb-5 px-0 pt-0 pb-2">
                    <li class="  active lineActive text-center" id="step1"></li>
                    <li class="   active text-center" id="step2"></li>
                    <li class="     text-center" id="step3"></li>
                    <li class="  text-center " id="step4"></li>
                  </ul>
                  <% } else if (order.orderStatus=='Out for Delivery' ) {%>
                    <ul id="progressbar-2" class="d-flex justify-content-between mx-0 mt-0 mb-5 px-0 pt-0 pb-2">
                      <li class="  active lineActive text-center" id="step1"></li>
                      <li class="   active lineActive text-center" id="step2"></li>
                      <li class="   active  text-center" id="step3"></li>
                      <li class="  text-center " id="step4"></li>
                    </ul>
                    <% } else if (order.orderStatus=='Delivered' ){%>
                      <ul id="progressbar-2" class="d-flex justify-content-between mx-0 mt-0 mb-5 px-0 pt-0 pb-2">
                        <li class="  active lineActive text-center" id="step1"></li>
                        <li class="   active lineActive text-center" id="step2"></li>
                        <li class="   active  lineActive text-center" id="step3"></li>
                        <li class=" active text-center " id="step4"></li>
                      </ul>
                      <% } else if (order.orderStatus=='Cancelled' ){%>
                        <ul id="progressbar-2" class="d-flex justify-content-between mx-0 mt-0 mb-5 px-0 pt-0 pb-2">
                          <li class="  active  text-center" id="step5"></li>
                          <li class="     text-center" id="step5"></li>
                          <li class="      text-center" id="step5"></li>
                          <li class=" active text-center " id="step5"></li>
                        </ul>
                        <% } %>

                        <div class="d-flex justify-content-between">
                          <div class="d-lg-flex align-items-center">
                            <i class="fas fa-clipboard-list fa-3x me-lg-4 mb-3 mb-lg-0"></i>
                            <div>
                              <p class="fw-bold mb-1">Order</p>
                              <p class="fw-bold mb-0">Placed</p>
                            </div>
                          </div>
                          <div class="d-lg-flex align-items-center">
                            <i class="fas fa-shipping-fast fa-3x me-lg-4 mb-3 mb-lg-0"></i>
                            <div>
                              <p class="fw-bold mb-1">Order</p>
                              <p class="fw-bold mb-0">Shipped</p>
                            </div>
                          </div>
                          <div class="d-lg-flex align-items-center">
                            <i class="fas fa-box-open  fa-3x me-lg-4 mb-3 mb-lg-0"></i>
                            <div>
                              <p class="fw-bold mb-1">Out for</p>
                              <p class="fw-bold mb-0">Delivery</p>
                            </div>
                          </div>
                          <div class="d-lg-flex align-items-center">
                            <i class="fas fa-home fa-3x me-lg-4 mb-3 mb-lg-0"></i>
                            <div>
                              <p class="fw-bold mb-1">Order</p>
                              <p class="fw-bold mb-0">Arrived</p>
                            </div>
                          </div>
                        </div>
                        <br><br>
                        <%  if (order.orderStatus !="Cancelled" ) {%>
                          <button class="btn btn-danger" onclick="cancel()"> Cancel Order</button>
                          <% } %>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    function cancel() {
      Swal.fire({
        title: 'Cancel this Order ?',
        text: '',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, confirm!'
      }).then((result) => {
        if (result.value) {
          window.location.href = '/cancel-order?id=<%= order._id %>';
        }
      })
    }
  </script>

  <%- include('../layouts/userFooter.ejs') %>